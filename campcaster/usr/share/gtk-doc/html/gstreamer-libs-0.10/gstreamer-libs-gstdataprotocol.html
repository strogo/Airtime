<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
<title>gstdataprotocol</title>
<meta name="generator" content="DocBook XSL Stylesheets V1.72.0">
<link rel="start" href="index.html" title="GStreamer 0.10 Library Reference Manual">
<link rel="up" href="gstreamer-dataprotocol.html" title="GStreamer Data Protocol">
<link rel="prev" href="gstreamer-dataprotocol.html" title="GStreamer Data Protocol">
<link rel="next" href="gstreamer-net.html" title="GStreamer Network Classes">
<meta name="generator" content="GTK-Doc V1.8 (XML mode)">
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="part" href="gstreamer-libs.html" title="Part&#160;I.&#160;GStreamer Libraries">
<link rel="chapter" href="gstreamer-base.html" title="GStreamer Base and Utillity Classes">
<link rel="chapter" href="gstreamer-control.html" title="GStreamer Dynamic Parameter Control">
<link rel="chapter" href="gstreamer-dataprotocol.html" title="GStreamer Data Protocol">
<link rel="chapter" href="gstreamer-net.html" title="GStreamer Network Classes">
<link rel="chapter" href="gstreamer-check.html" title="GStreamer Check Unit Testing">
<link rel="part" href="gstreamer-libs-hierarchy.html" title="Part&#160;II.&#160;Object Hierarchy">
<link rel="index" href="api-index.html" title="Index">
<link rel="index" href="ix02.html" title="Index of deprecated symbols">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<table class="navigation" id="top" width="100%" summary="Navigation header" cellpadding="2" cellspacing="2">
<tr valign="middle">
<td><a accesskey="p" href="gstreamer-dataprotocol.html"><img src="left.png" width="24" height="24" border="0" alt="Prev"></a></td>
<td><a accesskey="u" href="gstreamer-dataprotocol.html"><img src="up.png" width="24" height="24" border="0" alt="Up"></a></td>
<td><a accesskey="h" href="index.html"><img src="home.png" width="24" height="24" border="0" alt="Home"></a></td>
<th width="100%" align="center">GStreamer 0.10 Library Reference Manual</th>
<td><a accesskey="n" href="gstreamer-net.html"><img src="right.png" width="24" height="24" border="0" alt="Next"></a></td>
</tr>
<tr><td colspan="5" class="shortcuts"><nobr><a href="#id2611482" class="shortcut">Top</a>
                  &#160;|&#160;
                  <a href="#id2612231" class="shortcut">Description</a></nobr></td></tr>
</table>
<div class="refentry" lang="en">
<a name="gstreamer-libs-gstdataprotocol"></a><div class="titlepage"></div>
<div class="refnamediv"><table width="100%"><tr>
<td valign="top">
<h2>
<a name="id2611482"></a><span class="refentrytitle">gstdataprotocol</span>
</h2>
<p>gstdataprotocol &#8212; Serialization of caps, buffers and events.</p>
</td>
<td valign="top" align="right"></td>
</tr></table></div>
<div class="refsynopsisdiv">
<h2>Synopsis</h2>
<pre class="synopsis">

#include &lt;gst/dataprotocol/dataprotocol.h&gt;


enum                <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a>;
enum                <a href="gstreamer-libs-gstdataprotocol.html#GstDPPayloadType">GstDPPayloadType</a>;
#define             <a href="gstreamer-libs-gstdataprotocol.html#GST-DP-HEADER-LENGTH:CAPS">GST_DP_HEADER_LENGTH</a>
enum                <a href="gstreamer-libs-gstdataprotocol.html#GstDPVersion">GstDPVersion</a>;
#define             <a href="gstreamer-libs-gstdataprotocol.html#GST-DP-VERSION-MAJOR:CAPS">GST_DP_VERSION_MAJOR</a>
#define             <a href="gstreamer-libs-gstdataprotocol.html#GST-DP-VERSION-MINOR:CAPS">GST_DP_VERSION_MINOR</a>
void                <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-init">gst_dp_init</a>                         (void);
gboolean            (<a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFromBufferFunction">*GstDPHeaderFromBufferFunction</a>)    (const GstBuffer *buffer,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header);
gboolean            (<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketFromCapsFunction">*GstDPPacketFromCapsFunction</a>)      (const GstCaps *caps,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);
gboolean            (<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketFromEventFunction">*GstDPPacketFromEventFunction</a>)     (const GstEvent *event,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);
                    <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer">GstDPPacketizer</a>;
<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer">GstDPPacketizer</a>*    <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-packetizer-new">gst_dp_packetizer_new</a>               (<a href="gstreamer-libs-gstdataprotocol.html#GstDPVersion">GstDPVersion</a> version);
void                <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-packetizer-free">gst_dp_packetizer_free</a>              (<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer">GstDPPacketizer</a> *packetizer);
guint16             <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-crc">gst_dp_crc</a>                          (const guint8 *buffer,
                                                         guint length);
guint32             <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-header-payload-length">gst_dp_header_payload_length</a>        (const guint8 *header);
<a href="gstreamer-libs-gstdataprotocol.html#GstDPPayloadType">GstDPPayloadType</a>    <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-header-payload-type">gst_dp_header_payload_type</a>          (const guint8 *header);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-header-from-buffer">gst_dp_header_from_buffer</a>           (const GstBuffer *buffer,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-packet-from-caps">gst_dp_packet_from_caps</a>             (const GstCaps *caps,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-packet-from-event">gst_dp_packet_from_event</a>            (const GstEvent *event,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);
GstBuffer*          <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-buffer-from-header">gst_dp_buffer_from_header</a>           (guint header_length,
                                                         const guint8 *header);
GstCaps*            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-caps-from-packet">gst_dp_caps_from_packet</a>             (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);
GstEvent*           <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-event-from-packet">gst_dp_event_from_packet</a>            (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-header">gst_dp_validate_header</a>              (guint header_length,
                                                         const guint8 *header);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-payload">gst_dp_validate_payload</a>             (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);
gboolean            <a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-packet">gst_dp_validate_packet</a>              (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);

</pre>
</div>
<div class="refsect1" lang="en">
<a name="id2612231"></a><h2>Description</h2>
<p>
This helper library provides serialization of GstBuffer, GstCaps and
GstEvent structures.
</p>
<p>
This serialization is useful when GStreamer needs to interface with
the outside world to transport data between distinct GStreamer pipelines.
The connections with the outside world generally don't have mechanisms
to transport properties of these structures.
</p>
<p>
For example, transporting buffers across named pipes or network connections
doesn't maintain the buffer size and separation.
</p>
<p>
This data protocol assumes a reliable connection-oriented transport, such as
TCP, a pipe, or a file.  The protocol does not serialize the caps for
each buffer; instead, it transport the caps only when they change in the
stream.  This implies that there will always be a caps packet before any
buffer packets.
</p>
<p>
The versioning of the protocol is independent of GStreamer's version.
The major number gets incremented, and the minor reset, for incompatible
changes.  The minor number gets incremented for compatible changes that
allow clients who do not completely understand the newer protocol version
to still decode what they do understand.
</p>
<p>
Version 0.2 serializes only a small subset of all events, with a custom
payload for each type.  Also, all GDP streams start with the initial caps
packet.
</p>
<p>
Version 1.0 serializes all events by taking the string representation of
the event as the payload.  In addition, GDP streams can now start with
events as well, as required by the new data stream model in GStreamer 0.10.
</p>
<p>
Converting buffers, caps and events to GDP buffers is done using a
<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a> object and invoking its packetizer functions.
For backwards-compatibility reasons, the old 0.2 methods are still
available but deprecated.
</p>
<p>
For reference, this image shows the byte layout of the GDP header:
</p>
<p>
<img src="gdp-header.png"></p>
<p>

</p>
</div>
<div class="refsect1" lang="en">
<a name="id2612322"></a><h2>Details</h2>
<div class="refsect2" lang="en">
<a name="id2612332"></a><h3>
<a name="GstDPHeaderFlag"></a>enum GstDPHeaderFlag</h3>
<a class="indexterm" name="id2612346"></a><pre class="programlisting">typedef enum {
  GST_DP_HEADER_FLAG_NONE        = 0,
  GST_DP_HEADER_FLAG_CRC_HEADER  = (1 &lt;&lt; 0),
  GST_DP_HEADER_FLAG_CRC_PAYLOAD = (1 &lt;&lt; 1),
  GST_DP_HEADER_FLAG_CRC         = (1 &lt;&lt; 1) | (1 &lt;&lt; 0),
} GstDPHeaderFlag;
</pre>
<p>
header flags for the dataprotocol.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><a name="GST-DP-HEADER-FLAG-NONE:CAPS"></a><code class="literal">GST_DP_HEADER_FLAG_NONE</code></span></td>
<td> No flag present.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-HEADER-FLAG-CRC-HEADER:CAPS"></a><code class="literal">GST_DP_HEADER_FLAG_CRC_HEADER</code></span></td>
<td> a header CRC field is present.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-HEADER-FLAG-CRC-PAYLOAD:CAPS"></a><code class="literal">GST_DP_HEADER_FLAG_CRC_PAYLOAD</code></span></td>
<td> a payload CRC field is present.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-HEADER-FLAG-CRC:CAPS"></a><code class="literal">GST_DP_HEADER_FLAG_CRC</code></span></td>
<td> a CRC for header and payload is present.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612467"></a><h3>
<a name="GstDPPayloadType"></a>enum GstDPPayloadType</h3>
<a class="indexterm" name="id2612480"></a><pre class="programlisting">typedef enum {
  GST_DP_PAYLOAD_NONE            = 0,
  GST_DP_PAYLOAD_BUFFER,
  GST_DP_PAYLOAD_CAPS,
  GST_DP_PAYLOAD_EVENT_NONE      = 64,
} GstDPPayloadType;
</pre>
<p>
The GDP payload types. a <span class="type">GstEvent</span> payload type is encoded with the
event type number starting from <em class="parameter"><code>GST_DP_PAYLOAD_EVENT_NONE</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><a name="GST-DP-PAYLOAD-NONE:CAPS"></a><code class="literal">GST_DP_PAYLOAD_NONE</code></span></td>
<td> Invalid payload type.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-PAYLOAD-BUFFER:CAPS"></a><code class="literal">GST_DP_PAYLOAD_BUFFER</code></span></td>
<td> <span class="type">GstBuffer</span> payload packet.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-PAYLOAD-CAPS:CAPS"></a><code class="literal">GST_DP_PAYLOAD_CAPS</code></span></td>
<td> <span class="type">GstCaps</span> payload packet.
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-PAYLOAD-EVENT-NONE:CAPS"></a><code class="literal">GST_DP_PAYLOAD_EVENT_NONE</code></span></td>
<td> First value of <span class="type">GstEvent</span> payload packets.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612634"></a><h3>
<a name="GST-DP-HEADER-LENGTH:CAPS"></a>GST_DP_HEADER_LENGTH</h3>
<a class="indexterm" name="id2612646"></a><pre class="programlisting">#define GST_DP_HEADER_LENGTH 62
</pre>
<p>
The header size in bytes.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612665"></a><h3>
<a name="GstDPVersion"></a>enum GstDPVersion</h3>
<a class="indexterm" name="id2612678"></a><pre class="programlisting">typedef enum {
  GST_DP_VERSION_0_2 = 1,
  GST_DP_VERSION_1_0,
} GstDPVersion;
</pre>
<p>
The version of the GDP protocol being used.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><a name="GST-DP-VERSION-0-2:CAPS"></a><code class="literal">GST_DP_VERSION_0_2</code></span></td>
<td> protocol version 0.2
</td>
</tr>
<tr>
<td><span class="term"><a name="GST-DP-VERSION-1-0:CAPS"></a><code class="literal">GST_DP_VERSION_1_0</code></span></td>
<td> protocol version 1.0
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612748"></a><h3>
<a name="GST-DP-VERSION-MAJOR:CAPS"></a>GST_DP_VERSION_MAJOR</h3>
<a class="indexterm" name="id2612761"></a><pre class="programlisting">#define GST_DP_VERSION_MAJOR 0
</pre>
<p>
The major version number of the GStreamer Data Protocol.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612781"></a><h3>
<a name="GST-DP-VERSION-MINOR:CAPS"></a>GST_DP_VERSION_MINOR</h3>
<a class="indexterm" name="id2612794"></a><pre class="programlisting">#define GST_DP_VERSION_MINOR 2
</pre>
<p>
The minor version number of the GStreamer Data Protocol.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612814"></a><h3>
<a name="gst-dp-init"></a>gst_dp_init ()</h3>
<a class="indexterm" name="id2612826"></a><pre class="programlisting">void                gst_dp_init                         (void);</pre>
<p>
Initialize GStreamer Data Protocol library.
</p>
<p>
Should be called before using these functions from source linking
to this source file.</p>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612856"></a><h3>
<a name="GstDPHeaderFromBufferFunction"></a>GstDPHeaderFromBufferFunction ()</h3>
<a class="indexterm" name="id2612869"></a><pre class="programlisting">gboolean            (*GstDPHeaderFromBufferFunction)    (const GstBuffer *buffer,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header);</pre>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>


</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2612990"></a><h3>
<a name="GstDPPacketFromCapsFunction"></a>GstDPPacketFromCapsFunction ()</h3>
<a class="indexterm" name="id2613004"></a><pre class="programlisting">gboolean            (*GstDPPacketFromCapsFunction)      (const GstCaps *caps,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);</pre>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>caps</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>


</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613146"></a><h3>
<a name="GstDPPacketFromEventFunction"></a>GstDPPacketFromEventFunction ()</h3>
<a class="indexterm" name="id2613159"></a><pre class="programlisting">gboolean            (*GstDPPacketFromEventFunction)     (const GstEvent *event,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);</pre>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>event</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td>
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td>


</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613302"></a><h3>
<a name="GstDPPacketizer"></a>GstDPPacketizer</h3>
<a class="indexterm" name="id2613314"></a><pre class="programlisting">typedef struct {
  GstDPVersion version;

  GstDPHeaderFromBufferFunction header_from_buffer;
  GstDPPacketFromCapsFunction packet_from_caps;
  GstDPPacketFromEventFunction packet_from_event;
} GstDPPacketizer;
</pre>
<p>

</p>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613332"></a><h3>
<a name="gst-dp-packetizer-new"></a>gst_dp_packetizer_new ()</h3>
<a class="indexterm" name="id2613346"></a><pre class="programlisting"><a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer">GstDPPacketizer</a>*    gst_dp_packetizer_new               (<a href="gstreamer-libs-gstdataprotocol.html#GstDPVersion">GstDPVersion</a> version);</pre>
<p>
Creates a new packetizer.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>version</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-libs-gstdataprotocol.html#GstDPVersion"><span class="type">GstDPVersion</span></a> of the protocol to packetize for.
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a newly allocated <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a>
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613424"></a><h3>
<a name="gst-dp-packetizer-free"></a>gst_dp_packetizer_free ()</h3>
<a class="indexterm" name="id2613437"></a><pre class="programlisting">void                gst_dp_packetizer_free              (<a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer">GstDPPacketizer</a> *packetizer);</pre>
<p>
Free the given packetizer.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody><tr>
<td><span class="term"><em class="parameter"><code>packetizer</code></em>&#160;:</span></td>
<td> the <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a> to free.
</td>
</tr></tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613497"></a><h3>
<a name="gst-dp-crc"></a>gst_dp_crc ()</h3>
<a class="indexterm" name="id2613509"></a><pre class="programlisting">guint16             gst_dp_crc                          (const guint8 *buffer,
                                                         guint length);</pre>
<p>
Calculate a CRC for the given buffer over the given number of bytes.
This is only provided for verification purposes; typical GDP users
will not need this function.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></td>
<td> array of bytes
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td> the length of <em class="parameter"><code>buffer</code></em>
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> a two-byte CRC checksum.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613599"></a><h3>
<a name="gst-dp-header-payload-length"></a>gst_dp_header_payload_length ()</h3>
<a class="indexterm" name="id2613613"></a><pre class="programlisting">guint32             gst_dp_header_payload_length        (const guint8 *header);</pre>
<p>
Get the length of the payload described by <em class="parameter"><code>header</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte header of the packet array
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the length of the payload this header describes.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613681"></a><h3>
<a name="gst-dp-header-payload-type"></a>gst_dp_header_payload_type ()</h3>
<a class="indexterm" name="id2613694"></a><pre class="programlisting"><a href="gstreamer-libs-gstdataprotocol.html#GstDPPayloadType">GstDPPayloadType</a>    gst_dp_header_payload_type          (const guint8 *header);</pre>
<p>
Get the type of the payload described by <em class="parameter"><code>header</code></em>.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte header of the packet array
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> the <a href="gstreamer-libs-gstdataprotocol.html#GstDPPayloadType"><span class="type">GstDPPayloadType</span></a> the payload this header describes.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613770"></a><h3>
<a name="gst-dp-header-from-buffer"></a>gst_dp_header_from_buffer ()</h3>
<a class="indexterm" name="id2613786"></a><pre class="programlisting">gboolean            gst_dp_header_from_buffer           (const GstBuffer *buffer,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">gst_dp_header_from_buffer</code> is deprecated and should not be used in newly-written code. use a <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a></p>
</div>
<p>
Creates a GDP header from the given buffer.
</p>
<p>
Returns:</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>buffer</code></em>&#160;:</span></td>
<td> a <span class="type">GstBuffer</span> to create a header for
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td> the <span class="type">GDPHeaderFlags</span> to create the header with
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td> a guint pointer to store the header length in
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> a guint8 * pointer to store a newly allocated header byte array in
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the header was successfully created.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2613965"></a><h3>
<a name="gst-dp-packet-from-caps"></a>gst_dp_packet_from_caps ()</h3>
<a class="indexterm" name="id2613981"></a><pre class="programlisting">gboolean            gst_dp_packet_from_caps             (const GstCaps *caps,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">gst_dp_packet_from_caps</code> is deprecated and should not be used in newly-written code. use a <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a></p>
</div>
<p>
Creates a GDP packet from the given caps.
</p>
<p>
Returns:</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>caps</code></em>&#160;:</span></td>
<td> a <span class="type">GstCaps</span> to create a packet for
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td> the <span class="type">GDPHeaderFlags</span> to create the header with
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td> a guint pointer to store the header length in
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> a guint8 pointer to store a newly allocated header byte array in
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> a guint8 pointer to store a newly allocated payload byte array in
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the packet was successfully created.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614182"></a><h3>
<a name="gst-dp-packet-from-event"></a>gst_dp_packet_from_event ()</h3>
<a class="indexterm" name="id2614198"></a><pre class="programlisting">gboolean            gst_dp_packet_from_event            (const GstEvent *event,
                                                         <a href="gstreamer-libs-gstdataprotocol.html#GstDPHeaderFlag">GstDPHeaderFlag</a> flags,
                                                         guint *length,
                                                         guint8 **header,
                                                         guint8 **payload);</pre>
<div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Warning</h3>
<p><code class="literal">gst_dp_packet_from_event</code> is deprecated and should not be used in newly-written code. use a <a href="gstreamer-libs-gstdataprotocol.html#GstDPPacketizer"><span class="type">GstDPPacketizer</span></a></p>
</div>
<p>
Creates a GDP packet from the given event.
</p>
<p>
Returns:</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>event</code></em>&#160;:</span></td>
<td> a <span class="type">GstEvent</span> to create a packet for
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>flags</code></em>&#160;:</span></td>
<td> the <span class="type">GDPHeaderFlags</span> to create the header with
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>length</code></em>&#160;:</span></td>
<td> a guint pointer to store the header length in
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> a guint8 pointer to store a newly allocated header byte array in
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> a guint8 pointer to store a newly allocated payload byte array in
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the packet was successfully created.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614399"></a><h3>
<a name="gst-dp-buffer-from-header"></a>gst_dp_buffer_from_header ()</h3>
<a class="indexterm" name="id2614413"></a><pre class="programlisting">GstBuffer*          gst_dp_buffer_from_header           (guint header_length,
                                                         const guint8 *header);</pre>
<p>
Creates a newly allocated <span class="type">GstBuffer</span> from the given header.
The buffer data needs to be copied into it before validating.
</p>
<p>
Use this function if you want to pre-allocate a buffer based on the
packet header to read the packet payload in to.
</p>
<p>
This function does not check the header passed to it, use
<a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-header"><code class="function">gst_dp_validate_header()</code></a> first if the header data is unchecked.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> A <span class="type">GstBuffer</span> if the buffer was successfully created, or NULL.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614534"></a><h3>
<a name="gst-dp-caps-from-packet"></a>gst_dp_caps_from_packet ()</h3>
<a class="indexterm" name="id2614547"></a><pre class="programlisting">GstCaps*            gst_dp_caps_from_packet             (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);</pre>
<p>
Creates a newly allocated <span class="type">GstCaps</span> from the given packet.
</p>
<p>
This function does not check the arguments passed to it, use
<a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-packet"><code class="function">gst_dp_validate_packet()</code></a> first if the header and payload data are
unchecked.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> the byte array of the packet payload
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> A <span class="type">GstCaps</span> containing the caps represented in the packet,
         or NULL if the packet could not be converted.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614687"></a><h3>
<a name="gst-dp-event-from-packet"></a>gst_dp_event_from_packet ()</h3>
<a class="indexterm" name="id2614700"></a><pre class="programlisting">GstEvent*           gst_dp_event_from_packet            (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);</pre>
<p>
Creates a newly allocated <span class="type">GstEvent</span> from the given packet.
</p>
<p>
This function does not check the arguments passed to it, use
<a href="gstreamer-libs-gstdataprotocol.html#gst-dp-validate-packet"><code class="function">gst_dp_validate_packet()</code></a> first if the header and payload data are
unchecked.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> the byte array of the packet payload
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> A <span class="type">GstEvent</span> if the event was successfully created,
         or NULL if an event could not be read from the payload.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614840"></a><h3>
<a name="gst-dp-validate-header"></a>gst_dp_validate_header ()</h3>
<a class="indexterm" name="id2614853"></a><pre class="programlisting">gboolean            gst_dp_validate_header              (guint header_length,
                                                         const guint8 *header);</pre>
<p>
Validates the given packet header by checking the CRC checksum.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the CRC matches, or no CRC checksum is present.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2614948"></a><h3>
<a name="gst-dp-validate-payload"></a>gst_dp_validate_payload ()</h3>
<a class="indexterm" name="id2614961"></a><pre class="programlisting">gboolean            gst_dp_validate_payload             (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);</pre>
<p>
Validates the given packet payload using the given packet header
by checking the CRC checksum.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> the byte array of the packet payload
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the CRC matches, or no CRC checksum is present.
</td>
</tr>
</tbody>
</table></div>
</div>
<hr>
<div class="refsect2" lang="en">
<a name="id2615079"></a><h3>
<a name="gst-dp-validate-packet"></a>gst_dp_validate_packet ()</h3>
<a class="indexterm" name="id2615092"></a><pre class="programlisting">gboolean            gst_dp_validate_packet              (guint header_length,
                                                         const guint8 *header,
                                                         const guint8 *payload);</pre>
<p>
Validates the given packet by checking version information and checksums.</p>
<p>

</p>
<div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td><span class="term"><em class="parameter"><code>header_length</code></em>&#160;:</span></td>
<td> the length of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>header</code></em>&#160;:</span></td>
<td> the byte array of the packet header
</td>
</tr>
<tr>
<td><span class="term"><em class="parameter"><code>payload</code></em>&#160;:</span></td>
<td> the byte array of the packet payload
</td>
</tr>
<tr>
<td><span class="term"><span class="emphasis"><em>Returns</em></span>&#160;:</span></td>
<td> <code class="literal">TRUE</code> if the packet validates.
</td>
</tr>
</tbody>
</table></div>
</div>
</div>
<div class="refsect1" lang="en">
<a name="id2615210"></a><h2>See Also</h2>
<span class="type">GstCaps</span>, <span class="type">GstEvent</span>, <span class="type">GstBuffer</span>
</div>
</div>
</body>
</html>
